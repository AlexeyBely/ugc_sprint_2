# Тестирование хранилища mongoDB

В сервисе кинотеатра 1000 кинопроизведений, для тестирования возьмем два случая с 100 и 1000 пользователями.  
Кол-во документов в коллекциях лайков, рецензий, закладкок возьмем по 100000 и 1000000 соотвественно.
Тестирование проводилось на железе: i5 2 ядра, 8 ГБ оператианой памяти

### 100 пользователей и 100000 документов в каждой колекции

Средняя выборка 1000 записей понравившихся пользователю фильмов:  
191 мс  

Средняя выборка 1000 записей лайков у определённого фильма:  
194 мс

Средняя выборка 100 записей понравившихся пользователю фильмов:  
19 мс  

Среднее время записи документа и его поиск по user_id и movie_id:
запись - 12 мс, чтение - 194 мс

Среднее время поиска документа по _id:
3 мс

### 1000 пользователей и 1000000 документов в каждой колекции

Средняя выборка 1000 записей понравившихся пользователю фильмов:  
830 мс  

Средняя выборка 1000 записей лайков у определённого фильма:  
840 мс

Среднее время записи документа и его поиск по user_id и movie_id:
запись - 13 мс, чтение - 900 мс

Среднее время поиска документа по _id:
3 мс

## Вывод

Время поиска сильно зависит от количества документов в коллекции, причем зависимость не линейная.  
Поиск по _id выполняется намного быстрее, чем по поиск user_id и movie_id.

Для выполнения условия скорости обработки данных < 200 мс поиск лайка следует проводить по _id документа.
Для отображения списка фильмов или пользователей требуется делать пагинацию, не более 100 результатов на страницу.  
Пагинацию следует реализовывать смещением указателя.

