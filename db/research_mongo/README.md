# Тестирование хранилища mongoDB

В сервисе кинотеатра 1000 кинопроизведений, для тестирования возьмем два случая с 100 и 1000 пользователями.  
Кол-во документов в коллекциях лайков, рецензий, закладкок возьмем по 100000 и 1000000 соотвественно.
Тестирование проводилось на железе: i5 2 ядра, 8 ГБ оператианой памяти

### 100 пользователей и 100000 документов в каждой колекции

Средняя выборка 1000 записей понравившихся пользователю фильмов:  
48 мс  

Средняя выборка 1000 записей лайков у определённого фильма:  
50мс

Средняя выборка 100 записей понравившихся пользователю фильмов:  
7 мс  

Среднее время записи документа и его поиск по user_id и movie_id:  
запись - 9 мс, чтение - 4 мс

Среднее время поиска документа по _id:
3 мс

### 1000 пользователей и 1000000 документов в каждой колекции

Средняя выборка 1000 записей понравившихся пользователю фильмов:  
50 мс  

Средняя выборка 1000 записей лайков у определённого фильма:  
52 мс

Среднее время записи документа и его поиск по user_id и movie_id:  
запись - 18 мс, чтение - 4 мс

Среднее время поиска документа по _id:
3 мс

## Вывод

Время поиска не сильно зависит от количества документов в коллекции для нашей ситуации.   

Для отображения списка фильмов или пользователей требуется делать пагинацию,  
желательно не более 100 результатов на страницу.    
Пагинацию следует реализовывать смещением указателя.

Время записи документа занимает значительно больше времени чем чтение.
Для тестируемого случая все запросы выполняются менее 200 мс, что соотвествует заявленным требованиям.

